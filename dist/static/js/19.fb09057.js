(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{KidZ:function(t,o,e){},c8rj:function(t,o,e){"use strict";e.r(o);var a=e("Wa2I"),u=e.n(a),s=e("3eXy"),i=(e("nQ0s"),e("eFdw"),e("b0p+")),r=e.n(i),n=(e("9UV2"),e("zWze")),c=r.a.aqmChooseTab,l=r.a.aqmBarRatio,h=r.a.aqmNavbar,p=r.a.aqmPiechart,d=r.a.aqmBondRatio,f=["#12223d","#545d72","#9a9eac","#cdcfd7","#fa6c2e","#f88049","#ff9d6e","#ffba95","#ffd5be","#c8c0b2"],v=["#12223d","#cdcfd7","#f88049","#ffd5be","#c8c0b2"],m=["#FF671B ","#FE9564","#FEAC85","#FFC9AC","#FDE0D1","#4B4B4B"],_={components:{aqmChooseTab:c,aqmBarRatio:l,aqmNavbar:h,aqmPiechart:p,aqmBondRatio:d},mixins:[n.a],data:function(){return{countryShowList:[],countryMap:{AU:this.$t("portfolio.country_australia"),CA:this.$t("portfolio.country_canada"),CH:this.$t("portfolio.country_switzerland"),CN:this.$t("portfolio.country_china"),DE:this.$t("portfolio.country_germany"),FR:this.$t("portfolio.country_france"),UK:this.$t("portfolio.country_uk"),GB:this.$t("portfolio.country_uk"),IN:this.$t("portfolio.country_india"),JP:this.$t("portfolio.country_japan"),NN:this.$t("portfolio.country_other"),US:this.$t("portfolio.country_usa"),KR:this.$t("portfolio.country_korea"),TW:this.$t("portfolio.country_taiwan"),HK:this.$t("portfolio.country_hk"),ZA:this.$t("portfolio.country_south_africa"),MX:this.$t("portfolio.country_mexico"),SG:this.$t("portfolio.country_singapore"),BR:this.$t("portfolio.country_brazil"),NA:this.$t("portfolio.country_namibia"),TH:this.$t("portfolio.country_thailand"),MY:this.$t("portfolio.country_malaysia"),NL:this.$t("portfolio.country_netherlands"),RU:this.$t("portfolio.country_russian"),IT:this.$t("portfolio.country_italy"),ES:this.$t("portfolio.country_spain"),SE:this.$t("portfolio.country_sweden"),DK:this.$t("portfolio.country_denmark"),BE:this.$t("portfolio.country_belgium")},sectorMap:{consumer_a:this.$t("portfolio.industry12"),consumer_b:this.$t("portfolio.industry11"),consumer:this.$t("portfolio.industry4"),energy:this.$t("portfolio.industry5"),financials:this.$t("portfolio.industry6"),healthcare:this.$t("portfolio.industry3"),industrials:this.$t("portfolio.industry7"),materials:this.$t("portfolio.industry1"),technology:this.$t("portfolio.industry8"),telecommunications:this.$t("portfolio.industry2"),utilities:this.$t("portfolio.industry9"),others:this.$t("portfolio.country_other")},ratingList:[],durationList:[],sectorList:[],isShowClose:!1,chooseValue:1,percentList:[{name:"股票",value:""},{name:"债券",value:""},{name:"另类投资",value:""}],bondChooseValue:1,bondTab:[{name:this.$t("portfolio.distribute_rating"),key:1},{name:this.$t("portfolio.distribute_duration"),key:2}],stockTab:[{name:this.$t("portfolio.distribute_industry"),key:1},{name:this.$t("portfolio.distribute_area"),key:2}],ratePieData:[],datePieData:[],countryPieData:[],sectorPieData:[],showTips:!1}},computed:{},watch:{bondChooseValue:function(t){2===t&&this.$refs.pieChart1.startDraw(this.datePieData)},chooseValue:function(t){2===t&&this.$refs.countryPieChart.startDraw(this.countryPieData)}},methods:{init:function(){var r=this;s.a.getDefaultAcc().then(function(){s.a.getPortfolio().then(function(t){return t.target&&s.a.getDistribution(t.target).then(function(t){console.log(t);var o=t.sectorMap,e=t.countryMap,s=t.ratingMap,i=t.durationMap;r.countryShowList=r.precessData(e,r.countryMap,5),r.countryPieData=r.forMatStyle(r.countryShowList,m),r.sectorList=r.precessData(o,r.sectorMap,5,!0),r.sectorPieData=r.forMatStyle(r.sectorList,m),setTimeout(function(){r.$refs.sectorPieChart.startDraw(r.sectorPieData)},200);(r.$store.state.isHKUS||r.$store.state.isUS?["AAA","AA","A","BBB","BB","B","CCC","CC","C","D"]:["AAA","AA1","AA2","AA3","A1","A2","A3","BAA1","BAA2","BAA3"]).forEach(function(t,o){var e={},a={name:"",value:"",itemStyle:{normal:{color:""}}};e.name=t,e.percent="".concat(u()(100*s[t]).toFixed(2),"%"),e.color=f[o],a.name=t,a.value="".concat(u()(100*s[t]).toFixed(2)),a.itemStyle.normal.color=f[o],r.ratingList.push(e),r.ratePieData.push(a)}),console.log(r.ratePieData),setTimeout(function(){r.$refs.pieChart.startDraw(r.ratePieData)},100);var a={};(r.$store.state.isHKUS||r.$store.state.isUS)&&(a["0-3"]=u()(i["0-1"])+u()(i["1-3"]),a["3-5"]=u()(i["3-5"]),a["5-7"]=u()(i["5-7"]),a["7-10"]=u()(i["7-10"]),a["10+"]=u()(i["10-15"])+u()(i["15-20"])+u()(i["20+"]),i=a);["0-3","3-5","5-7","7-10","10+"].forEach(function(t,o){var e={},a={name:"",value:"",itemStyle:{normal:{color:""}}};e.name="".concat(t," Years"),e.percent="".concat(u()(100*i[t]).toFixed(2),"%"),e.color=v[o],a.name="".concat(t," Years"),a.value="".concat(u()(100*i[t]).toFixed(2)),a.itemStyle.normal.color=v[o],r.durationList.push(e),r.datePieData.push(a)})}).catch(function(t){r.handleError(t)}),r.showMarketUpdatedDetail(t.id,t.target,t.expectedInvestedAmount)}).then(function(t){r.pieData=t.fundsValue,r.percentList=r.computePiePercent(t,self.investedAmount)}).catch(function(t){t&&(r.handleError(t),console.log(t))})}).catch(function(t){return r.handleError(t)})},precessData:function(t,o,e){var a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],s=[];for(var i in t){var r={};"NN"!==i&&"Others"!==i&&"others"!==i&&(r.name=a?o["".concat(i.toLocaleLowerCase())]:o[i],r.percent="".concat(u()(100*t[i]).toFixed(2),"%"),s.push(r))}s.sort(function(t,o){return u()(o.percent)-u()(t.percent)}),s=s.slice(0,e);var n=0;s.forEach(function(t,o){n+=u()(t.percent),t.color=m[o]});var c="".concat((100-n).toFixed(2),"%"),l={name:o.NN||o.others,percent:c,color:m[e]};return s.push(l),s},forMatStyle:function(t,a){var s=[];return t.forEach(function(t,o){var e={name:"",value:"",itemStyle:{normal:{color:""}}};e.name=t.name,e.value=u()(t.percent),e.itemStyle.normal.color=a[o],s.push(e)}),s},goTips:function(){this.showTips=!this.showTips},goBack:function(){this.$router.back()}},mounted:function(){var t=this;this.$nextTick(function(){t.init()})},beforeDestroy:function(){}},y=(e("vRLx"),e("KHd+")),C=Object(y.a)(_,function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{staticClass:"distribute-page"},[e("aqmNavbar",{attrs:{showClose:o.isShowClose,value:o.$t("portfolio.submenu2_2"),showHelp:!0},on:{close:o.emitClose,goBack:o.goBack,goHelp:o.goFaq}}),o._v(" "),e("div",{staticClass:"invest-container"},[e("div",{staticClass:"invest-type"},[e("span",{staticClass:"invest-name"},[o._v(o._s(o.percentList[0].name))]),o._v(" "),e("span",{staticClass:"invest-percent"},[o._v(o._s((100*o.percentList[0].value).toFixed(2)+"%"))])]),o._v(" "),e("aqmChooseTab",{class:{"en-tab":"en"===o.$i18n.locale},attrs:{chooseValue:o.chooseValue,items:o.stockTab},on:{"update:chooseValue":function(t){o.chooseValue=t},"update:choose-value":function(t){o.chooseValue=t}}}),o._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:1===o.chooseValue,expression:"chooseValue === 1"}]},[e("aqmPiechart",{ref:"sectorPieChart",attrs:{showCenter:!1,size:120}}),o._v(" "),e("aqmBondRatio",{staticClass:"bond-date",attrs:{items:o.sectorList}})],1),o._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:2===o.chooseValue,expression:"chooseValue === 2"}]},[e("aqmPiechart",{ref:"countryPieChart",attrs:{showCenter:!1,size:120}}),o._v(" "),e("aqmBondRatio",{staticClass:"bond-date",attrs:{items:o.countryShowList}})],1),o._v(" "),e("div",{staticClass:"under-line"}),o._v(" "),e("div",{staticClass:"invest-type"},[e("span",{staticClass:"invest-name"},[o._v(o._s(o.percentList[1].name))]),o._v(" "),e("span",{staticClass:"invest-percent"},[o._v(o._s((100*o.percentList[1].value).toFixed(2)+"%"))])]),o._v(" "),e("aqmChooseTab",{class:{"en-tab":"en"===o.$i18n.locale},attrs:{chooseValue:o.bondChooseValue,items:o.bondTab},on:{"update:chooseValue":function(t){o.bondChooseValue=t},"update:choose-value":function(t){o.bondChooseValue=t}}}),o._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:1===o.bondChooseValue,expression:"bondChooseValue === 1"}]},[e("aqmPiechart",{ref:"pieChart",attrs:{showCenter:!1,size:120}}),o._v(" "),e("div",{staticClass:"right-cont"},[e("aqmBondRatio",{attrs:{items:o.ratingList}}),o._v(" "),e("div",{staticClass:"tips-container"},[e("span",{staticClass:"bond-tips",on:{click:o.goTips}},[e("span",{directives:[{name:"show",rawName:"v-show",value:o.showTips,expression:"showTips"}],staticClass:"tips-cont"},[o._v(o._s(o.$t("portfolio.distribute_rating_desc")))])]),o._v(" "),e("span",{staticClass:"tips-title"},[o._v(o._s(o.$t("portfolio.distribute_rating_what")))])])],1)],1),o._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:2===o.bondChooseValue,expression:"bondChooseValue === 2"}]},[e("aqmPiechart",{ref:"pieChart1",attrs:{showCenter:!1,size:120}}),o._v(" "),e("div",{staticClass:"right-cont"},[e("aqmBondRatio",{attrs:{items:o.durationList}}),o._v(" "),e("div",{staticClass:"tips-container"},[e("span",{staticClass:"bond-tips",on:{click:o.goTips}},[e("span",{directives:[{name:"show",rawName:"v-show",value:o.showTips,expression:"showTips"}],staticClass:"tips-cont"},[o._v(o._s(o.$t("portfolio.distribute_duration_desc")))])]),o._v(" "),e("span",{staticClass:"tips-title"},[o._v(o._s(o.$t("portfolio.distribute_duration_what")))])])],1)],1),o._v(" "),e("div",{staticClass:"under-line"}),o._v(" "),e("div",{staticClass:"invest-type"},[e("span",{staticClass:"invest-name"},[o._v(o._s(o.percentList[2].name))]),o._v(" "),e("span",{staticClass:"invest-percent"},[o._v(o._s((100*o.percentList[2].value).toFixed(2)+"%"))])])],1)],1)},[],!1,null,null,null);o.default=C.exports},vRLx:function(t,o,e){"use strict";var a=e("KidZ");e.n(a).a}}]);