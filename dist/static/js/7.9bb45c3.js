(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"0u2j":function(t,e,a){},CpBc:function(t,e,a){var o=a("Y7ZC"),s=a("EP9H");o(o.G+o.F*(parseFloat!=s),{parseFloat:s})},EP9H:function(t,e,a){var o=a("5T2Y").parseFloat,s=a("oc46").trim;t.exports=1/o(a("5pKv")+"-0")!=-1/0?function(t){var e=s(String(t),3),a=o(e);return 0===a&&"-"==e.charAt(0)?-0:a}:o},Wa2I:function(t,e,a){t.exports=a("e+cT")},"e+cT":function(t,e,a){a("CpBc"),t.exports=a("WEpk").parseFloat},hXb9:function(t,e,a){"use strict";var o=a("0u2j");a.n(o).a},o1Z8:function(t,e,a){"use strict";a.r(e);var o=a("xHqa"),s=a.n(o),i=a("Wa2I"),r=a.n(i),n=a("Cg2A"),c=a.n(n),l=a("b0p+"),u=a.n(l),h=a("v5wO"),d=a("3eXy"),m=a("nQ0s"),w=u.a.aqmNavbar,f=u.a.aqmSectionNavbar,_=u.a.aqmLabelInfo,v=u.a.aqmCategoryL1,p=u.a.aqmCollapse,g=u.a.aqmVuxInput,$=u.a.aqmPasswordPopcard,C=u.a.aqmConfirm,S=u.a.aqmSelectButton,x=u.a.aqmSuccessTip,b=s()({components:{aqmNavbar:w,aqmSectionNavbar:f,aqmLabelInfo:_,aqmCategoryL1:v,aqmCollapse:p,aqmVuxInput:g,aqmPasswordPopcard:$,aqmConfirm:C,aqmSelectButton:S,aqmSuccessTip:x},props:{},mixins:[],data:function(){return{buttonText:this.$t("m_transfer.back_to_withdraw"),investableAmount:"0",fronzenAmount:"0",hkdAmount:"0",usdAmount:"0",rmbAmount:"0",uid:"",hkd:" ("+this.$t("transfer.hkd")+")",securitiesAccount:"",securitiesUsername:"",titleText:this.$t("transfer.withdraw_cash"),withdrawValue:"",totalValue:"0",accountUpdateTime:"",showAlert:!1,showPopCard:!1,investedAmountString:"",showConfirm:!1,accData:{},showClose:!0,showBack:!0,hasAccount:!1,cashOutDisabled:!1,status:0,totalValueOrg:0,withdrawNotice1:this.$t("transfer.withdraw_notice3_left"),jumpUrl:"",step:2,contentText:{state1:"您的卖出申请已经受理"},canClick:!0}},computed:{},watch:{},methods:{init:function(){var e=this;localStorage.getItem("uid")&&(this.uid=localStorage.getItem("uid"),(this.$store.state.isHKUS||this.$store.state.isUS)&&(this.withdrawNotice1=this.$t("m_transfer.withdraw_notice3_left_1")),d.a.getDefaultAcc().then(function(t){return e.investableAmount=Object(h.formatMoney)(t.investableAmount)||"0.00",e.fronzenAmount=Object(h.formatMoney)(t.fronzenAmount)||"0.00",e.hkdAmount=Object(h.formatMoney)(t.hkdAmount)||"0.00",e.usdAmount=Object(h.formatMoney)(t.usdAmount)||"0.00",e.rmbAmount=Object(h.formatMoney)(t.rmbAmount)||"0.00",e.totalValueOrg=Math.floor(100*t.totalValue)/100,e.totalValue=Object(h.formatMoney)(t.totalValue)||"0.00",t}).then(function(){return e.hasAccount=!0,d.a.getPortfolio()}).then(function(t){t?(e.accountUpdateTime=Object(h.formatDate)(c()(),"yyyy-MM-dd hh:mm:ss"),e.tradingStatus=t.tradingStatus,e.status=t.status,e.accountData=t,e.tradingStatus!==m.f.TRADING_WAIT&&e.tradingStatus!==m.f.TRADING_IN_PROGRESS&&e.hasAccount&&e.status!==m.e.STOPPED&&e.status!==m.e.CLOSED?e.cashOutDisabled=!1:e.cashOutDisabled=!0,e.accData=t):e.cashOutDisabled=!0}).catch(function(t){e.handleError(t)}))},onChange:function(){var t=this;this.$nextTick(function(){t.inputValue=t.formatValue(t.inputValue)})},goPortfolio:function(){this.$router.push("/portfolio")},cancelWithdraw:function(){this.showConfirm=!1},initAccountStatus:function(){},confirmWithdraw:function(){var t,e=this;this.canClick&&(this.canClick=!1,setTimeout(function(){this.canClick=!0},2e3),t=this.withdrawValue==this.totalValueOrg?{oid:localStorage.getItem("oid")||10,pid:localStorage.getItem("pid")||20,portfolioId:localStorage.getItem("p_id"),iaccountId:localStorage.getItem("i_id"),status:601e3,target:this.accData.target,type:m.b.PORTFOLIO_REBALANCE_CASH_ALL_OUT}:((+this.withdrawValue).toFixed(2),{oid:localStorage.getItem("oid"),pid:localStorage.getItem("pid"),portfolioId:localStorage.getItem("p_id"),iaccountId:localStorage.getItem("i_id"),status:601e3,target:this.accData.target,type:m.b.PORTFOLIO_REBALANCE_CASH_OUT,amount:-r()(this.withdrawValue)}),d.a.postAdvisor(t).then(function(){e.step=3,e.showBack=!1,e.showClose=!0,e.showConfirm=!1}).catch(function(t){e.handleError(t),e.showConfirm=!1}))},goNext:function(){if(!this.cashOutDisabled){var t=this.totalValueOrg-this.withdrawValue;this.withdrawValue.match(/^(?:\d+|\d{1,3}(?:\d{3})+)(?:\.\d+)?$/)?this.withdrawValue>this.totalValueOrg?this.$vux.toast.show({text:"您输入的金额超过投资组合当前价值，请重新输入或全部提取",type:"text",width:"300px"}):this.withdrawValue<1e4?this.$vux.toast.show({text:"卖出金额10,000港币起，请重新输入",type:"text",width:"300px"}):t<8e4&&0!=t?this.$vux.toast.show({text:"您的账户剩余价值不足8w港币，请重新输入或全部提取",type:"text",width:"300px"}):this.showConfirm=!0:this.$alertBox("请输入数字",!1)}},onPswFinishCard:function(t,e){this.tradePassword=t,this.confirmOrder()},confirmOrder:function(){var e=this;this.$store.commit("CHANGE_ALERT_COUNT",0),this.tradePassword?d.a.checkTradePwd(this.tradePassword).then(function(){e.showConfirm=!0}).catch(function(t){e.resErrHandle(t)}):this.$alertBox(this.$t("info.input_pwd"))},resErrHandle:function(t){if(t&&t.status&&t.status.ecode){var e,a=t.status.ecode,o=t.data.tran_try_count;if(21002===a)return void(4===o?this.$alertBox(this.$t("m_transfer.err_pwd_over_4")):5===this.pwdErrcounter?this.$alertBox(this.$t("m_transfer.err_pwd_over_5")):this.$alertBox(this.$t("m_transfer.trade_error_note")));if(e=t.data.trade_pwd_locked&&6<t.data.tran_try_count?this.$t("m_transfer.trade_pwd_locked"):this.$t("m_transfer.over_6"),21009===a){return void this.$vux.alert.show({title:"",content:e,buttonText:this.$t("m_transfer.reset_pwd"),onShow:function(){console.log("Plugin: I'm showing")},onHide:function(){location.href="".concat(location.origin,"/account/#/forgetpassword")}})}this.handleError(t),console.error(t)}console.error(t)},cardBottomBtnClick:function(t){console.log("card bottom click"),window.location.href="".concat(window.location.origin,"/account/#/forgetpassword")},cardClose:function(t){this.showPopCard=!1}},mounted:function(){var t=this;this.$nextTick(function(){t.init()})},beforeDestroy:function(){}},"mounted",function(){var t=this;this.$nextTick(function(){t.init()})}),A=(a("hXb9"),a("KHd+")),O=Object(A.a)(b,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"withdraw-page"},[a("aqm-navbar",{attrs:{value:e.$t("transfer.go_sell"),showClose:!0,showBack:!0,showHelp:!0},on:{close:e.emitClose,goBack:e.emitBack,goHelp:e.goFaq}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.step,expression:"step===2"}],staticClass:"step2"},[a("section",{staticClass:"account-sell"},[a("aqm-category-l1",{attrs:{categoryText:e.$t("transfer.invest_to_cash")}}),e._v(" "),a("aqmVuxInput",{staticClass:"cash-input",attrs:{title:"$",placeholder:e.$t("hst.sell_min")},on:{input:e.onChange},model:{value:e.withdrawValue,callback:function(t){e.withdrawValue=t},expression:"withdrawValue"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showAlert&&!e.$store.state.isHKUS&&!e.$store.state.isUS,expression:"showAlert && !$store.state.isHKUS && !$store.state.isUS"}],staticClass:"yellow-alert"},[e._v(e._s(e.$t("transfer.money_sell_at_least_1w")))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showAlert&&(e.$store.state.isHKUS||e.$store.state.isUS),expression:"showAlert && ($store.state.isHKUS || $store.state.isUS)"}],staticClass:"yellow-alert"},[e._v(e._s(e.$t("m_transfer.min_cash_out"))+"\n        ")]),e._v(" "),a("aqm-category-l1",{attrs:{categoryText:e.$t("overview.current_value")}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.$store.state.isHKUS&&!e.$store.state.isUS,expression:"!$store.state.isHKUS && !$store.state.isUS"}],staticClass:"currrent-value"},[e._v("HKD "+e._s(e.totalValue))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.isHKUS||e.$store.state.isUS,expression:"$store.state.isHKUS || $store.state.isUS"}],staticClass:"currrent-value"},[e._v("USD "+e._s(e.totalValue))]),e._v(" "),a("div",{staticClass:"update-time"},[e._v(e._s(e.$t("transfer.account_value_update_time"))+": "+e._s(e.accountUpdateTime))]),e._v(" "),a("div",{staticClass:"notice-note notice-note1"},[e._v(e._s(e.$t("transfer.out_notice")))]),e._v(" "),a("div",{staticClass:"notice-note notice-note2"},[e._v(e._s(e.$t("transfer.out_notice1")))])],1),e._v(" "),a("aqmConfirm",{attrs:{showConfirm:e.showConfirm,confirmBtn:e.$t("allocation.sure"),cancelBtn:e.$t("allocation.cancel"),confirmCont:e.$t("transfer.confirm_transfer_out"),title:e.$t("transfer.go_sell"),showTitle:!0},on:{cancel:e.cancelWithdraw,confirm:e.confirmWithdraw}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3===e.step,expression:"step===3"}],staticClass:"step3"},[a("aqmSuccessTip",{attrs:{contentText:e.contentText,showState2:!1}}),e._v(" "),a("aqmSelectButton",{attrs:{height:"43","border-radius":"5","font-size":16,value:"返回投顾账户"},on:{click:e.goPortfolio}})],1),e._v(" "),a("aqmSelectButton",{directives:[{name:"show",rawName:"v-show",value:2===e.step,expression:"step===2"}],class:{disabled:e.cashOutDisabled},attrs:{height:"43","border-radius":"5","font-size":16,value:e.$t("transfer.go_sell")},on:{click:e.goNext}})],1)},[],!1,null,null,null);e.default=O.exports}}]);