(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{jHl5:function(t,e,a){},jVcv:function(t,e,a){"use strict";a.r(e);var o=a("hfKm"),s=a.n(o),i=a("2Eek"),n=a.n(i),r=a("XoMD"),c=a.n(r),u=a("Jo+v"),l=a.n(u),h=a("4mXO"),f=a.n(h),m=a("pLtp"),v=a.n(m),d=a("eVuF"),p=a.n(d),_=a("xHqa"),$=a.n(_),y=a("3eXy"),C=(a("nQ0s"),a("eFdw"),a("b0p+")),g=a.n(C),w=(a("9UV2"),a("zWze"));function q(e,t){var a=v()(e);if(f.a){var o=f()(e);t&&(o=o.filter(function(t){return l()(e,t).enumerable})),a.push.apply(a,o)}return a}var T=g.a.aqmHistoryChart,b=g.a.aqmAccountinfo,k=g.a.aqmPiechart,P=g.a.aqmPiestate,R={components:{aqmHistoryChart:T,aqmAccountinfo:b,aqmPiechart:k,aqmShowpanel:g.a.aqmShowpanel,aqmState:g.a.aqmState,aqmNavbar:g.a.aqmNavbar,aqmCategoryL1:g.a.aqmCategoryL1,aqmPiestate:P},mixins:[w.a],data:function(){return{stateName:this.$t("m_allocation.statement"),stateContent:this.$t("transfer.out_notice"),accountInfo:[{title:this.$t("m_invest_type.combination_value_hkd"),value:0}],titleTips:this.$t("m_invest_type.request_reply"),history:this.$t("portfolio.menu2"),details:this.$t("m_invest_type.allocation_detail"),stockCg:this.$t("portfolio.stock"),bondCg:this.$t("portfolio.bond"),otherCg:this.$t("portfolio.other"),nameCode:this.$t("m_allocation.name_code"),itemMoneyText:this.$t("transfer.deposit_cash_value"),accumulatedReturnRate:"0.00",hasPortfolio:!1,isFirstConstruction:!1,historyText:{historyOne:this.$t("m_portfolio.oneMonth"),historyThree:this.$t("m_portfolio.threeMonths"),historyOneYear:this.$t("m_portfolio.oneYear"),historyToNow:this.$t("m_portfolio.fromFirstDay"),historyCashIn:this.$t("historyChart.list_2"),historyAmout:"账户价值",historyValue:this.$t("historyChart.list_1"),historyEarn:this.$t("historyChart.list_3")},cashType:"HKD",accumulatedPl:0,purchasePower:""}},computed:{},watch:{},methods:{init:function(){var e=this;y.a.getDefaultAcc().then(function(t){e.accData=t,localStorage.setItem("i_id",t.id),e.purchasePower=t.investableAmount,y.a.getPortfolio().then(function(t){if(!t.id||2e5<=t.status)return e.hasPortfolio=!1,e.accumulatedReturnRate="--",e.portfolioRes=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach(function(t){$()(e,t,a[t])}):c.a?n()(e,c()(a)):q(a).forEach(function(t){s()(e,t,l()(a,t))})}return e}({},t),e.portfolioRes.expectedInvestedAmount=null,console.log("getPortfolio-portfolio"),e.accountInfo[0].value=t.value||0,e.accumulatedPl=t.accumulatedPl||0,t.id?p.a.all([y.a.getPortfolioPerformance(t.id),y.a.getAdvisor()]).then(function(t){e.$refs.earning&&e.$refs.earning.startDraw(t[0])}):e.$refs.earning&&e.$refs.earning.startDraw([]),p.a.reject(!1);t.id&&(e.portfolioRes=t,e.accumulatedReturnRate="".concat((100*t.twr_return).toFixed(2),"%"),e.riskIndex=t.riskScore,e.riskType=t.riskType,e.isFirstConstruction=t.isFirstConstruction,t.isFirstConstruction&&(e.itemMoneyText=e.$t("result.value_need"),e.accumulatedReturnRate="--"),t.isFirstConstruction&&e.showOrderingTip&&(e.accountInfo[0].title=e.$store.state.isHKUS||e.$store.state.isUS?e.$t("result.value_need_sg"):e.$t("result.value_need")),setTimeout(function(){e.accountInfo[0].value=e.portfolioRes.value,e.accumulatedPl=e.portfolioRes.accumulatedPl,console.log(e.accountInfo),p.a.all([y.a.getPortfolioPerformance(e.portfolioRes.id),y.a.getAdvisor()]).then(function(t){e.$refs.earning&&e.$refs.earning.startDraw(t[0])})},100))}).catch(function(t){t&&(e.handleError(t),console.log(t))})}).catch(function(t){return e.handleError(t)})},goFaq:function(){this.$router.push("/faq")},btnClick:function(){this.$router.push("/trade")},showHover:function(t){},goBack:function(){this.$router.back()},hideTooltips:function(){var t,e=this;return function(){t&&clearTimeout(t),t=setTimeout(function(){e&&e.$refs&&e.$refs.earning&&e.$refs.earning.chartBackup&&e.$refs.earning.chartBackup.dispatchAction({type:"hideTip"});t=null,console.log(0x650e124ef1c7)},2e3)}}},mounted:function(){var t=this;this.$nextTick(function(){t.init()}),document.addEventListener("touchstart",function(){},!0);var e=document.getElementsByClassName("chart-content")[0];e&&this.hideTooltips&&e.addEventListener("touchend",this.hideTooltips())},beforeDestroy:function(){document.removeEventListener("touchstart",function(){},!0),timeout&&clearTimeout(timeout)}},H=(a("o5Vt"),a("KHd+")),S=Object(H.a)(R,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"history-page"},[a("aqmNavbar",{attrs:{showClose:!0,showBack:!1,showHelp:!0,value:e.$t("portfolio.menu2")},on:{close:e.emitClose,goHelp:e.goFaq}}),e._v(" "),a("aqmAccountinfo",{attrs:{accountInfo:e.accountInfo}}),e._v(" "),a("div",{staticClass:"return-cash-wrap"},[a("div",{staticClass:"return-rate"},[a("div",{staticClass:"title"},[e._v(e._s(e.$t("m_invest_type.accumulated_profit"))+"\n      ")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e._f("formatMoney")(e.accumulatedPl)))])]),e._v(" "),a("div",{staticClass:"return-rate"},[a("div",{staticClass:"title"},[e._v(e._s(e.$t("summarybar.earn_radio"))+"\n        "),a("span",{staticClass:"tips-icon",on:{click:function(t){return e.showHover(1)}}},[a("span",{staticClass:"tips-cont"},[e._v(e._s(e.$t("summarybar.overview_returnRate_tip")))])])]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.accumulatedReturnRate))])]),e._v(" "),a("div",{staticClass:"return-rate cash-left"},[a("div",{staticClass:"title"},[e._v(e._s(e.$t("hst.invest_acc_cash"))+"\n        "),a("span",{staticClass:"tips-icon",on:{click:function(t){return e.showHover(1)}}},[a("span",{staticClass:"tips-cont"},[e._v(e._s(e.$t("hst.invest_acc_cash_desc")))])])]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e._f("formatMoney")(e.purchasePower)))])])]),e._v(" "),a("aqmHistoryChart",{ref:"earning",attrs:{parSelectTime:1,isUS:e.$store.state.isUS||e.$store.state.isHKUS,showTitle:!1,historyText:e.historyText,cashType:""}}),e._v(" "),a("aqmSelectButton",{staticClass:"order-btn",attrs:{fontSize:16,height:39,borderRadius:3,value:e.$t("hst.history_view")},on:{click:e.btnClick}}),e._v(" "),a("footer",{staticClass:"footer-tab"},[a("aqm-tabbar",{attrs:{menu:e.menu_p,activeBtn:1}})],1)],1)},[],!1,null,null,null);e.default=S.exports},o5Vt:function(t,e,a){"use strict";var o=a("jHl5");a.n(o).a}}]);